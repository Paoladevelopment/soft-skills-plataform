[gd_scene load_steps=14 format=3 uid="uid://3s06cwf2lthj"]

[ext_resource type="PackedScene" uid="uid://ms8eyfv7ncrk" path="res://Scene/tile_map.tscn" id="1_oyub8"]
[ext_resource type="PackedScene" uid="uid://lmnhxpy1d57x" path="res://Scene/Player.tscn" id="2_vru1o"]
[ext_resource type="PackedScene" uid="uid://op0oaeo6jk6j" path="res://portal.tscn" id="3_mharx"]
[ext_resource type="Script" path="res://Assets/Scripts/CameraFollow.gd" id="4_bb2rc"]
[ext_resource type="PackedScene" uid="uid://cy5en4vexv6ei" path="res://Scene/box_character.tscn" id="5_0hh6c"]
[ext_resource type="PackedScene" uid="uid://d0t0lg04w71e8" path="res://Scene/Tps.tscn" id="6_n6nw4"]
[ext_resource type="PackedScene" uid="uid://l1hca8iurvfx" path="res://Assets/Scripts/Detector.tscn" id="7_llfah"]
[ext_resource type="PackedScene" uid="uid://dp0bpp2m04tvn" path="res://Scene/Arrow_impulse.tscn" id="8_be5m6"]
[ext_resource type="PackedScene" uid="uid://4tbrqb71klbr" path="res://Scene/Balance.tscn" id="9_cnk88"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_iusvx"]
light_mode = 2

[sub_resource type="Gradient" id="Gradient_y63so"]
resource_local_to_scene = true
offsets = PackedFloat32Array(0.329897, 0.752577)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_u6c4w"]
gradient = SubResource("Gradient_y63so")
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_5g60d"]
polygon = PackedVector2Array(-1.61707, 5.05675, -0.134756, 8.6687, 1.48232, 5.05675, 1.75183, -4.33435, 0, -10.1135, -1.61707, -4.33435)

[node name="Node2D" type="Node2D"]
y_sort_enabled = true
position = Vector2(77, 14)

[node name="TileMap" parent="." instance=ExtResource("1_oyub8")]
texture_filter = 2
collision_visibility_mode = 1
layer_0/tile_data = PackedInt32Array(65535, 393217, 0, 0, 393217, 0, 131071, 393217, 0, 196607, 393217, 0, 1, 393217, 0, 196610, 393217, 0, 262146, 393217, 0, 262145, 393217, 0, 196609, 393217, 0, 196608, 393217, 0, 262143, 393217, 0, 327679, 393217, 0, 262144, 393217, 0, 2, 393217, 0, 393215, 393217, 0, 458751, 393217, 0, 262147, 393217, 0, 196611, 393217, 0, 524287, 393217, 0, 3, 393217, 0, 4, 393217, 0, 5, 393217, 0, 6, 393217, 0, 65542, 393217, 0, 131078, 393217, 0, 196614, 393217, 0, 262150, 393217, 0, 327686, 393217, 0, 393222, 393217, 0, 458758, 393217, 0, 524288, 393217, 0, 524289, 393217, 0, 524290, 393217, 0, 524291, 393217, 0, 524292, 393217, 0, 524293, 393217, 0, 327681, 393217, 0, 327682, 393217, 0, 458749, 393217, 0, 393213, 2, 0, 327677, 393217, 0, 262141, 458753, 0, 196605, 393217, 0, 131069, 393217, 0, 65533, 393217, 0, -3, 393217, 0, -65538, 393218, 0, -65537, 393218, 0, -131072, 2, 0, -131071, 2, 0, -131069, 393218, 0, -131070, 393218, 0, -131068, 393218, 0, -131067, 393218, 0, -131066, 393218, 0, -65539, 393218, 0, 589825, 393217, 0, 655362, 393217, 0, 655363, 393217, 0, 655366, 393217, 0, 655367, 393217, 0, 655368, 393217, 0, 655369, 393217, 0, 589833, 393217, 0, 524297, 393217, 0, 524298, 393217, 0, 458762, 1, 0, 393226, 2, 0, 327690, 2, 0, 262154, 393217, 0, 196618, 393217, 0, 131082, 393217, 0, 65546, 393217, 0, 65545, 393217, 0, 131081, 393217, 0, 196617, 393217, 0, 262153, 2, 0, 327689, 2, 0, 393225, 2, 0, 393224, 2, 0, 458760, 2, 0, 524296, 393217, 0, 327688, 2, 0, 262152, 2, 0, 196616, 393217, 0, 458761, 2, 0, 9, 393217, 0, 65544, 393217, 0, 131080, 393217, 0, 8, 393217, 0, 327683, 393217, 0, 131073, 393217, 0, 131074, 393217, 0, 524294, 393217, 0, 524295, 393217, 0, 196621, 393217, 0, 262156, 393217, 0, 196620, 393217, 0, -65534, 393217, 0, -65535, 458753, 0, -65536, 458753, 0, -1, 458753, 0, -2, 393217, 0, 65534, 393217, 0, 131070, 393217, 0, 196606, 393217, 0, 262142, 393217, 0, 327678, 458753, 0, 393214, 393217, 0, 458750, 393217, 0, 524286, 393217, 0, 524285, 393217, 0, 589821, 393217, 0, 655357, 393217, 0, 720893, 393217, 0, 720894, 393217, 0, 655358, 393217, 0, 589822, 393217, 0, 589823, 393217, 0, 655359, 393217, 0, 720895, 393217, 0, 655360, 393217, 0, 589824, 393217, 0, 655361, 393217, 0, -65533, 393218, 0, -65532, 393218, 0, -65531, 393218, 0, -65530, 393218, 0, -65529, 393218, 0, -131065, 393218, 0, -131064, 393218, 0, -65528, 393218, 0, -65527, 393218, 0, -131063, 2, 0, -131062, 2, 0, -65526, 393218, 0, 10, 393217, 0, 11, 393217, 0, -65525, 393218, 0, -131061, 393218, 0, -131060, 393218, 0, -65524, 393218, 0, 12, 393217, 0, 65548, 393217, 0, 65547, 393217, 0, 131083, 393217, 0, 196619, 393217, 0, 262155, 393217, 0, 327691, 1, 0, 393227, 1, 0, 458763, 1, 0, 524299, 393217, 0, 589835, 393217, 0, 589834, 393217, 0, 655370, 393217, 0, 655371, 393217, 0, 655372, 393217, 0, 589836, 393217, 0, 524300, 393217, 0, 458764, 458753, 0, 393228, 458753, 0, 327692, 393217, 0, 327693, 393217, 0, 262157, 393217, 0, 393229, 393217, 0, 458765, 393217, 0, 524301, 393217, 0, 589837, 393217, 0, 655373, 393217, 0, 131084, 393217, 0, 131085, 393217, 0, 65549, 393217, 0, 13, 393217, 0, -65523, 393218, 0, -131059, 393218, 0, 7, 393217, 0, 65543, 393217, 0, 131079, 393217, 0, 196615, 393217, 0, 262151, 393217, 0, 327687, 393217, 0, 393223, 393217, 0, 458759, 393217, 0, 851964, 1, 0, 917500, 1, 0, 983036, 1, 0, 851965, 1, 0, 917501, 1, 0, 983037, 1, 0, 851966, 1, 0, 917502, 1, 0, 983038, 1, 0, 851967, 1, 0, 917503, 1, 0, 983039, 1, 0, 786432, 1, 0, 851968, 1, 0, 917504, 1, 0, 786433, 1, 0, 851969, 1, 0, 917505, 1, 0, 786434, 2, 0, 851970, 2, 0, 917506, 2, 0, 786429, 2, 0, 786430, 2, 0, 786431, 2, 0, 720896, 2, 0, 720897, 2, 0, 720898, 2, 0, 131059, 2, 0, 196595, 2, 0, 262131, 2, 0, 327667, 2, 0, 393203, 2, 0, 131060, 2, 0, 196596, 2, 0, 262132, 2, 0, 327668, 2, 0, 393204, 2, 0, 131061, 2, 0, 196597, 2, 0, 262133, 2, 0, 327669, 2, 0, 393205, 2, 0, 131062, 2, 0, 196598, 2, 0, 262134, 2, 0, 327670, 2, 0, 393206, 2, 0, 262135, 2, 0, 327671, 2, 0, 262136, 2, 0, 327672, 2, 0, 262137, 2, 0, 327673, 2, 0, 131066, 393217, 0, 196602, 393217, 0, 262138, 393217, 0, 327674, 458753, 0, 393210, 393217, 0, 458746, 393217, 0, 524282, 393217, 0, 589818, 393217, 0, 655354, 393217, 0, 720890, 393217, 0, 786426, 2, 0, 851962, 2, 0, 917498, 2, 0, 983034, 2, 0, 1048570, 2, 0, 1114106, 2, 0, 1179642, 2, 0, 1245178, 2, 0, 1310714, 1, 1, 786427, 2, 0, 851963, 1, 0, 917499, 1, 0, 983035, 1, 0, 1048571, 1, 0, 1114107, 1, 0, 1179643, 1, 0, 1245179, 2, 0, 1310715, 1, 1, 1441787, 1, 1, 786428, 2, 0, 1048572, 1, 0, 1114108, 1, 0, 1179644, 1, 0, 1245180, 2, 0, 1310716, 1, 1, 1441788, 1, 1, 1572860, 1, 0, 1638396, 1, 0, 1048573, 1, 0, 1114109, 1, 0, 1179645, 1, 0, 1245181, 2, 0, 1310717, 1, 1, 1441789, 1, 1, 1572861, 1, 0, 1638397, 1, 0, 262139, 393218, 0, 196603, 393217, 0, 720891, 393217, 0, 655355, 393217, 0, 589819, 393217, 0, 524283, 393217, 0, 458747, 393217, 0, 393211, 393217, 0, 327675, 393217, 0, 327676, 393217, 0, 262140, 393217, 0, 196604, 393217, 0, 131068, 393217, 0, 65532, 393217, 0, -4, 393217, 0, -65540, 393218, 0, -65541, 393217, 0, -65542, 393217, 0, 65530, 393217, 0, -6, 393217, 0, -5, 393217, 0, 65531, 458753, 0, 131067, 393217, 0, 393212, 393217, 0, 458748, 458753, 0, 524284, 458753, 0, 589820, 393217, 0, 655356, 393217, 0, 720892, 393217, 0, 589826, 393217, 0, 589827, 393217, 0, 589828, 393217, 0, 589829, 393217, 0, 589830, 393217, 0, 589831, 393217, 0, 589832, 393217, 0, 720899, 393217, 0, 720900, 393217, 0, 720901, 393217, 0, 720902, 393217, 0, 720903, 393217, 0, 720906, 393217, 0, 720905, 393217, 0, 720904, 393217, 0, 655365, 393217, 0, 655364, 393217, 0, 196613, 393217, 0, 262149, 393217, 0, 327685, 393217, 0, 393221, 393217, 0, 458757, 393217, 0, 196612, 393217, 0, 393217, 393217, 0, 458753, 393217, 0, 458755, 393217, 0, 458754, 393217, 0, 393216, 393217, 0, 458752, 393217, 0, 393220, 393217, 0, 393218, 393217, 0, 458756, 393217, 0, 393219, 393217, 0, 327680, 393217, 0, 131072, 393217, 0, 327684, 393217, 0, 262148, 393217, 0, 131076, 393217, 0, 131075, 393217, 0, 65538, 393217, 0, 65537, 393217, 0, 131077, 393217, 0, 65540, 393217, 0, 65539, 393217, 0, 65541, 393217, 0, 65536, 393217, 0, 1703932, 1, 0, 1703933, 1, 0, 1769468, 1, 1, 1769469, 1, 1, 1900541, 1, 1, 1900542, 1, 1, 2031614, 1, 0, 2031615, 1, 0, 2097151, 1, 0, 2162687, 1, 0, 2162686, 1, 0, 2097150, 1, 0, 1310718, 1, 1, 1310719, 1, 1, 1441790, 1, 1, 1441791, 1, 1, 1376256, 1, 1, 1048574, 1, 0, 1114110, 1, 0, 1179646, 1, 0, 1245182, 2, 0, 1245183, 2, 0, 1179647, 1, 0, 1114111, 1, 0, 1048575, 1, 0, 1703934, 1, 0, 1703935, 1, 0, 1638400, 1, 0, 1638401, 1, 0, 1638402, 1, 0, 1572866, 1, 0, 1572865, 1, 0, 1572864, 1, 0, 1638399, 1, 0, 1572862, 1, 0, 1572863, 1, 0, 1507328, 1, 0, 1507329, 1, 0, 1638398, 1, 0, 1507330, 1, 0, 1966080, 1, 0, 2031616, 1, 0, 2097152, 1, 0, 2097153, 1, 0, 2162689, 1, 0, 2228222, 1, 0, 2228223, 1, 0, 2162688, 1, 0, 2162690, 1, 0, 2162691, 1, 0, 2162692, 1, 0, 2162693, 1, 0, 2162694, 1, 0, 2097158, 1, 0, 2031622, 1, 0, 2031621, 1, 0, 2031620, 1, 0, 2031619, 1, 0, 2031618, 1, 0, 2031617, 1, 0, 2097154, 1, 0, 2097155, 1, 0, 2097156, 1, 0, 2097157, 1, 0, 1966081, 1, 0, 1966082, 1, 0, 1966083, 1, 0, 1966084, 1, 0, 1966085, 1, 0, 1966086, 1, 0, 1900543, 1, 1, 1835008, 1, 1, 1835009, 1, 1, 1835010, 1, 1, 1835011, 1, 1, 1835012, 1, 1, 1835013, 1, 1, 1769470, 1, 1, 1769471, 1, 1, 1703936, 1, 1, 1703937, 1, 1, 1703938, 1, 1, 1703939, 1, 1, 1703940, 1, 1, 1638404, 1, 0, 1572868, 1, 0, 1572867, 1, 0, 1507331, 1, 0, 1638403, 1, 0, 1507332, 1, 0, 1179648, 2, 0, 1114112, 1, 0, 1048576, 1, 0, 1048577, 1, 0, 983041, 1, 0, 1114113, 1, 0, 1179649, 2, 0, 983040, 1, 0, 983042, 2, 0, 1048578, 2, 0, 1114114, 2, 0, 1179650, 2, 0, 1245184, 1, 1, 1245185, 1, 1, 1376257, 1, 1, 1376258, 1, 1, 1245186, 1, 1, 1376259, 1, 1, -262145, 2, 0, -327681, 2, 0, -393217, 2, 0, -458752, 2, 0, -458751, 2, 0, -262144, 2, 0, -327680, 2, 0, -393216, 2, 0, -393215, 2, 0, -262143, 2, 0, -327679, 2, 0, -393214, 2, 0, -327678, 2, 0, -458750, 2, 0, -196608, 2, 0, -196607, 2, 0, 720907, 393218, 0, 720908, 393218, 0, 720909, 393218, 0, 131056, 2, 0, 196592, 2, 0, 262128, 2, 0, 327664, 2, 0, 393200, 2, 0, 131057, 2, 0, 196593, 2, 0, 262129, 2, 0, 327665, 2, 0, 393201, 2, 0, 131058, 2, 0, 196594, 2, 0, 262130, 2, 0, 327666, 2, 0, 393202, 2, 0, -196599, 2, 0, -262135, 2, 0, -327671, 2, 0, -458743, 2, 0, -524279, 2, 0, -196598, 2, 0, -262134, 2, 0, -327670, 2, 0, -1245182, 2, 0, -1179646, 2, 0, -1114110, 2, 0, -1048574, 2, 0, -983038, 2, 0, -917502, 2, 0, -1245181, 2, 0, -1179645, 2, 0, -1114109, 2, 0, -1048573, 2, 0, -983037, 2, 0, -917501, 2, 0, -1245180, 2, 0, -1179644, 2, 0, -1114108, 2, 0, -1048572, 2, 0, -983036, 2, 0, -917500, 2, 0, -1245179, 2, 0, -1179643, 2, 0, -1114107, 2, 0, -1048571, 2, 0, -983035, 2, 0, -917499, 2, 4, -1245178, 2, 0, -1179642, 2, 0, -1114106, 2, 0, -1048570, 2, 0, -983034, 2, 0, -917498, 2, 0, -1245177, 2, 0, -1179641, 2, 0, -1114105, 2, 0, -1048569, 2, 0, -983033, 2, 0, -917497, 2, 0, -1245176, 2, 0, -1179640, 2, 0, -1114104, 2, 0, -1048568, 2, 0, -983032, 2, 0, -917496, 2, 0, -1245175, 2, 0, -1179639, 2, 0, -1114103, 2, 0, -1048567, 2, 0, -983031, 2, 0, -917495, 2, 0, -1245174, 2, 0, -1179638, 2, 0, -1114102, 2, 0, -1048566, 2, 0, -983030, 2, 0, -917494, 2, 0, -1245173, 2, 0, -1179637, 2, 4, -1114101, 2, 0, -1048565, 2, 0, -983029, 2, 0, -917493, 2, 0, -1245172, 2, 0, -1179636, 2, 0, -1114100, 2, 0, -1048564, 2, 0, -983028, 2, 0, -917492, 2, 0, -1245171, 2, 0, -1179635, 2, 0, -1114099, 2, 0, -1048563, 2, 0, -983027, 2, 0, -917491, 2, 0, -851966, 2, 0, -786430, 2, 0, -851965, 2, 0, -786429, 2, 0, -851964, 2, 0, -786428, 2, 0, -851963, 2, 0, -786427, 2, 0, -851962, 2, 0, -786426, 2, 0, -851961, 2, 0, -786425, 2, 0, -851960, 2, 0, -786424, 2, 0, -851959, 2, 0, -786423, 2, 0, -851958, 2, 0, -786422, 2, 0, -851957, 2, 0, -786421, 2, 0, -851956, 2, 0, -786420, 2, 0, -851955, 2, 0, -786419, 2, 0, -720887, 2, 0, -720886, 2, 0, -1179633, 2, 0, -1114097, 2, 0, -1048561, 2, 0, -983025, 2, 0, -917489, 2, 0, -851953, 2, 0, -786417, 2, 0, -720881, 2, 0, -1179632, 2, 0, -1114096, 2, 0, -1048560, 2, 0, -983024, 2, 0, -917488, 2, 0, -851952, 2, 0, -786416, 2, 0, -720880, 2, 0, -1179631, 2, 0, -1114095, 2, 0, -1048559, 2, 0, -983023, 2, 0, -917487, 2, 0, -851951, 2, 0, -786415, 2, 0, -720879, 2, 0, -1179630, 2, 0, -1114094, 2, 0, -1048558, 2, 0, -983022, 2, 0, -917486, 2, 0, -851950, 2, 0, -786414, 2, 0, -720878, 2, 0, -1310718, 2, 0, -720894, 2, 0, -1310717, 2, 0, -720893, 2, 0, -1310716, 2, 0, -720892, 2, 0, -1310715, 2, 0, -720891, 2, 0, -1310714, 2, 0, -720890, 2, 0, -1310713, 2, 0, -1310712, 2, 0, -720888, 2, 0, -1310711, 2, 0, -1310710, 2, 0, -1310709, 2, 0, -720885, 2, 0, -1310708, 2, 0, -720884, 2, 0, -1310707, 2, 0, -720883, 2, 0, -1310706, 2, 0, -1245170, 2, 0, -1179634, 2, 0, -1114098, 2, 0, -1048562, 2, 0, -983026, 2, 0, -917490, 2, 0, -851954, 2, 0, -786418, 2, 0, -720882, 2, 0, -1310705, 2, 0, -1245169, 2, 0, -1310704, 2, 0, -1245168, 2, 0, -1310703, 2, 0, -1245167, 2, 0, -1310702, 2, 0, -1245166, 2, 0, -393207, 2, 0, -589815, 2, 0, -655351, 2, 0, -655350, 2, 0, -589814, 65540, 0, -524278, 65540, 0, -458742, 65540, 0, -393206, 2, 0, -720889, 2, 0, -196596, 4, 4, -262132, 4, 4, -327668, 4, 4, -393204, 4, 4, -393203, 4, 4, -327667, 4, 4, -327666, 4, 4, -262130, 4, 4, -262131, 393219, 3, -196595, 4, 4, -196594, 4, 4, -196593, 4, 4, -262129, 4, 4, -393202, 393219, 3, -458738, 393219, 3, -393201, 4, 4, -327665, 4, 4, -458737, 4, 4, -458739, 393219, 3, -524275, 393219, 3, -524276, 393219, 3, -458740, 393219, 3, -524274, 393219, 3, -524273, 4, 4, -196597, 4, 4, -262133, 4, 4, -327669, 4, 4, -393205, 4, 4, -589813, 4, 4, -524277, 4, 4, -458741, 4, 4, -589812, 4, 4, -589811, 4, 4, -589810, 4, 4, -589809, 4, 4, -589808, 65540, 0, -589807, 65540, 0, -524272, 65540, 0, -458736, 65540, 0, -393200, 65540, 0, -327664, 65540, 0, -327663, 65540, 0, -262127, 65540, 0, -196591, 65540, 0, -131055, 65540, 0, -196592, 65540, 0, -262128, 65540, 0)
layer_1/tile_data = PackedInt32Array(262148, 65537, 2, 458761, 65538, 0, 196617, 65538, 0, 196618, 65538, 0, 196619, 65538, 0, 458762, 65538, 0, 458763, 65538, 0, 393227, 65538, 0, 327691, 65538, 0, 262155, 65538, 0)

[node name="Player" parent="." instance=ExtResource("2_vru1o")]
y_sort_enabled = true
position = Vector2(67, 88)

[node name="PointLight2D2" type="PointLight2D" parent="Player"]
material = SubResource("CanvasItemMaterial_iusvx")
position = Vector2(1.90735e-06, 0)
scale = Vector2(6.375, 4.36607)
color = Color(1, 1, 1, 0.498039)
shadow_enabled = true
texture = SubResource("GradientTexture2D_u6c4w")
texture_scale = 0.28
metadata/_edit_lock_ = true

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
position = Vector2(-3, 23)
color = Color(0, 0, 0, 1)

[node name="Portal" parent="." instance=ExtResource("3_mharx")]
position = Vector2(174, -46)
escena = "mapa2"

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("object_to_follow")]
position = Vector2(55, 49)
zoom = Vector2(1.015, 1.015)
position_smoothing_enabled = true
script = ExtResource("4_bb2rc")
object_to_follow = NodePath("../Player")

[node name="box_character" parent="." instance=ExtResource("5_0hh6c")]
position = Vector2(-73, 20)
collision_mask = 47
code = 1

[node name="LightOccluder2D" type="LightOccluder2D" parent="box_character"]
scale = Vector2(7.42081, -1.38429)
occluder = SubResource("OccluderPolygon2D_5g60d")
sdf_collision = false

[node name="Tps" parent="." instance=ExtResource("6_n6nw4")]
position = Vector2(247, 45)

[node name="Detector" parent="." instance=ExtResource("7_llfah")]
position = Vector2(-125, -11)
code = 1

[node name="Arrows" type="Node" parent="."]

[node name="Area2D2" parent="Arrows" instance=ExtResource("8_be5m6")]
position = Vector2(-69, 153)

[node name="Area2D" parent="Arrows" instance=ExtResource("8_be5m6")]
position = Vector2(-39, 137)

[node name="Area2D3" parent="Arrows" instance=ExtResource("8_be5m6")]
position = Vector2(89, 198)

[node name="Area2D4" parent="Arrows" instance=ExtResource("8_be5m6")]
position = Vector2(-23, 258)

[node name="Area2D5" parent="Arrows" instance=ExtResource("8_be5m6")]
position = Vector2(-150, 191)

[node name="CharacterBody2D" parent="." instance=ExtResource("5_0hh6c")]
position = Vector2(486, 41)

[node name="CharacterBody2D2" parent="." instance=ExtResource("5_0hh6c")]
position = Vector2(620, 62)
weight = 2

[node name="Balance" parent="." instance=ExtResource("9_cnk88")]
z_index = 1
position = Vector2(542, 9)
